{"version":3,"file":"commonHelpers.js","sources":["../src/js/cat-api.js","../src/index.js"],"sourcesContent":["import axios from \"axios\";\n\naxios.defaults.headers.common[\"x-api-key\"] =\n  \"live_4cGo7pfpOk2mCrYNuFxrzN4x9Tr8FpKtStGbwBmJipn0B1TW87rAnmh8GPepxKDN\";\n\nexport function fetchBreeds() {\n  return axios.get(\"https://api.thecatapi.com/v1/breeds\").then(res => {\n    return res.data.map(el => {\n      return {\n        name: el.name,\n        id: el.id,\n      };\n    });\n  });\n}\n\nexport function fetchCatByBreed(breedId) {\n  return axios.get(`https://api.thecatapi.com/v1/images/search?breed_ids=${breedId}`).then(res => {\n    if (!res.data.length) {\n      throw new Error(\"Chosen breed doesn't exist!\");\n    }\n    const { url, breeds } = res.data[0];\n    return {\n      url,\n      description: breeds[0].description,\n      name: breeds[0].name,\n      temperament: breeds[0].temperament,\n    };\n  });\n}\n","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport { fetchBreeds, fetchCatByBreed } from \"./js/cat-api\";\n\niziToast.settings({\n  position: \"topRight\",\n});\n\nconst selectEl = document.querySelector(\".breed-select\");\nconst loaderEl = document.querySelector(\".loader\");\nconst errorEl = document.querySelector(\".error\");\nconst contentEl = document.querySelector(\".cat-info\");\n\nselectEl.addEventListener(\"input\", onSelect);\n\nfetchBreeds()\n  .then(breeds => {\n    selectEl.innerHTML = breeds\n      .map(breed => {\n        return `<option value=\"${breed.id}\">${breed.name}</option>`;\n      })\n      .join(\"\");\n    selectEl.classList.remove(\"hidden\");\n  })\n  .catch(err => {\n    iziToast.error({\n      message: err.message,\n    });\n    errorEl.classList.remove(\"hidden\");\n  })\n  .finally(() => {\n    loaderEl.classList.add(\"hidden\");\n  });\n\nfunction onSelect(event) {\n  const breedId = event.target.value;\n  loaderEl.classList.remove(\"hidden\");\n  fetchCatByBreed(breedId)\n    .then(({ url, description, name, temperament }) => {\n      contentEl.innerHTML = `\n        <img src=\"${url}\" alt=\"a cat of ${name} breed\" width=\"500px\" />\n        <div class=\"textblock\">\n            <h1 class=\"title\">${name}</h1>\n            <p class=\"text\">${description}</p>\n            <p class=\"text\"><span class=\"bold\">Temperament: </span>${temperament}</p>\n        </div>\n      `;\n      contentEl.classList.remove(\"hidden\");\n      errorEl.classList.add(\"hidden\");\n    })\n    .catch(err => {\n      iziToast.error({\n        message: err.message,\n      });\n      contentEl.classList.add(\"hidden\");\n      errorEl.classList.remove(\"hidden\");\n    })\n    .finally(() => {\n      loaderEl.classList.add(\"hidden\");\n    });\n}\n"],"names":["axios","fetchBreeds","res","el","fetchCatByBreed","breedId","url","breeds","iziToast","selectEl","loaderEl","errorEl","contentEl","onSelect","breed","err","event","description","name","temperament"],"mappings":"6vBAEAA,EAAM,SAAS,QAAQ,OAAO,aAC5B,wEAEK,SAASC,GAAc,CAC5B,OAAOD,EAAM,IAAI,qCAAqC,EAAE,KAAKE,GACpDA,EAAI,KAAK,IAAIC,IACX,CACL,KAAMA,EAAG,KACT,GAAIA,EAAG,EACf,EACK,CACF,CACH,CAEO,SAASC,EAAgBC,EAAS,CACvC,OAAOL,EAAM,IAAI,wDAAwDK,GAAS,EAAE,KAAKH,GAAO,CAC9F,GAAI,CAACA,EAAI,KAAK,OACZ,MAAM,IAAI,MAAM,6BAA6B,EAE/C,KAAM,CAAE,IAAAI,EAAK,OAAAC,CAAM,EAAKL,EAAI,KAAK,GACjC,MAAO,CACL,IAAAI,EACA,YAAaC,EAAO,GAAG,YACvB,KAAMA,EAAO,GAAG,KAChB,YAAaA,EAAO,GAAG,WAC7B,CACA,CAAG,CACH,CCzBAC,EAAS,SAAS,CAChB,SAAU,UACZ,CAAC,EAED,MAAMC,EAAW,SAAS,cAAc,eAAe,EACjDC,EAAW,SAAS,cAAc,SAAS,EAC3CC,EAAU,SAAS,cAAc,QAAQ,EACzCC,EAAY,SAAS,cAAc,WAAW,EAEpDH,EAAS,iBAAiB,QAASI,CAAQ,EAE3CZ,EAAa,EACV,KAAKM,GAAU,CACdE,EAAS,UAAYF,EAClB,IAAIO,GACI,kBAAkBA,EAAM,OAAOA,EAAM,eAC7C,EACA,KAAK,EAAE,EACVL,EAAS,UAAU,OAAO,QAAQ,CACtC,CAAG,EACA,MAAMM,GAAO,CACZP,EAAS,MAAM,CACb,QAASO,EAAI,OACnB,CAAK,EACDJ,EAAQ,UAAU,OAAO,QAAQ,CACrC,CAAG,EACA,QAAQ,IAAM,CACbD,EAAS,UAAU,IAAI,QAAQ,CACnC,CAAG,EAEH,SAASG,EAASG,EAAO,CACvB,MAAMX,EAAUW,EAAM,OAAO,MAC7BN,EAAS,UAAU,OAAO,QAAQ,EAClCN,EAAgBC,CAAO,EACpB,KAAK,CAAC,CAAE,IAAAC,EAAK,YAAAW,EAAa,KAAAC,EAAM,YAAAC,CAAW,IAAO,CACjDP,EAAU,UAAY;AAAA,oBACRN,oBAAsBY;AAAA;AAAA,gCAEVA;AAAA,8BACFD;AAAA,qEACuCE;AAAA;AAAA,QAG/DP,EAAU,UAAU,OAAO,QAAQ,EACnCD,EAAQ,UAAU,IAAI,QAAQ,CACpC,CAAK,EACA,MAAMI,GAAO,CACZP,EAAS,MAAM,CACb,QAASO,EAAI,OACrB,CAAO,EACDH,EAAU,UAAU,IAAI,QAAQ,EAChCD,EAAQ,UAAU,OAAO,QAAQ,CACvC,CAAK,EACA,QAAQ,IAAM,CACbD,EAAS,UAAU,IAAI,QAAQ,CACrC,CAAK,CACL"}